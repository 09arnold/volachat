# VolaChat

<!-- Repo stats start -->
<div style='display: flex; flex-direction: row'>
<details>
  <summary style='display: flex; align-items: center'>
    <strong>
      Code Climate &nbsp; 
    </strong>
    <img src='https://badgen.net/codeclimate/maintainability/09arnold/volachat' />
  </summary>
  
  #### Details

  + [![Maintainability](https://api.codeclimate.com/v1/badges/3f9c7ebd04d6418e966d/maintainability)](https://codeclimate.com/github/09arnold/volachat/maintainability)

  + [![Issue Count](https://codeclimate.com/github/09arnold/volachat/badges/issue_count.svg)](https://codeclimate.com/github/09arnold/volachat)

  + [![Test Coverage](https://api.codeclimate.com/v1/badges/3f9c7ebd04d6418e966d/test_coverage)](https://codeclimate.com/github/09arnold/volachat/test_coverage)

  + [![Lines of Code](https://badgen.net/codeclimate/loc/09arnold/volachat)](https://badgen.net/codeclimate/issues/09arnold/volachat)

  + [![Technical Debt](https://badgen.net/codeclimate/tech-debt/09arnold/volachat)](https://badgen.net/codeclimate/issues/09arnold/volachat)

</details>
&nbsp; &nbsp; &nbsp; &nbsp; 
<div style='display: flex; '>
  <strong>CircleCI</strong> &nbsp; 
  <a href='https://circleci.com/gh/09arnold/volachat' target='_blank'>
    <img src='https://circleci.com/gh/09arnold/volachat.svg?style=svg' alt='CircleCI Badge'  style='align-items: center'/>
  </a>
</div>
</div>
<!-- Repo stats end -->

> Volachat is a WebRTC based communication app made for random, _volatile_ chatting. Communication is directly between users, going through no servers at all.
> ##### *_The only contact with a server is to tell each client how to connect to each other, from there, the server is never involved_

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).

## Getting Started
Volachat is built with [React](https://reactjs.org/), [Redux](https://react-redux.js.org/) and [PeerJS](https://peerjs.com/). 

#### Running Volachat
PeerJS provides a free signalling server that you can use or you can run your own local server. Volachat includes a local PeerJS signalling server.

To start the local signalling server, run `node .\src\webrtc\server.js` in the root of the project folder.

Visiting `http://localhost:9000` should show the folowing output:
```
{"name":"PeerJS Server","description":"A server side element to broker connections between PeerJS clients.","website":"http://peerjs.com/"}
```

Run `yarn start` to start Volachat and access it on  `http://localhost:3000`.

The signalling server used by Volachat can (currently) be changed in the `.\src\webrtc\index.js` file in the `setupPeer` method.
To use the online signalling server provided by PeerJS and not have to run the local signalling server, change 
```
RTCPeer = await new Peer(localPeerId, {
  host: '192.168.8.107', // local signalling server address
  port: 9000,
  path: '/volachat'
});
```
to 
```
RTCPeer = await new Peer(localPeerId);
```

## How it works - _a gist_
Volachat has no server to handle communication between clients; all communication is peer to peer and stored locally in the user's `localStorage`.

On first _launch_, where `localStorage` would be empty, Volachat shows a welcome dialog. The last step in the dialog requires the user to enter a `User Name` and it also displays an auto generated `localPeerId`. These are both saved to  `localStorage`.<br>
Volachat then creates a `PeerJS` peer (internally referred to as `RTCPeer`) with the autogenerated ID which connects to a signalling server.